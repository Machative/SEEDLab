This folder contains all the code for Demo 2. The purpose of Demo 2 is to rotate in a circle until a marker is detected, then to drive forward until the robot is within a foot of the marker.

The file arduino.ino is the full Arduino control and localization implementation. The code makes use of a finite state machine which goes between states of searching for the marker, halting to allow camera to get steady reading, then rotating to the angle given by the camera, then driving the distance read by the camera, then halting when the full distance is driven. The Arduino code also uses I2C to communicate with the Pi. The Arduino sends a 0 or a 1 depending on if it wants to receive angle data or marker height data. The Pi responds accordingly with the data. See the arduino.ino file for more specific documentation in the comments.

The file demo2_detection.py is used to first turn on the camera and start looking for markers. Once a marker is detected, the camera sends the angle to the arduino. Then once the Pi receives indication that the robot has been straightened out, the arduino then tells the Pi to send the height in pixels of the detected aruco marker. Using the pixel locations of the 4 corners of the detected marker, the average pixel height is found for the aruco marker. Then the Pi sends the pixel height to the arduino, which uses the height to calculate the distance that the robot is away from the marker.
